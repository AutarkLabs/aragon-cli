{"version":3,"sources":["../../../src/commands/apm_cmds/info.js"],"names":["APM","require","chalk","TaskList","defaultAPMName","ensureWeb3","getRepoTask","exports","command","describe","builder","args","handler","apmRepo","apmOptions","apm","apmRepoVersion","network","web3","ensRegistryAddress","tasks","title","bold","task","artifactRequired","run","then","ctx","repo","abi","environments","console","log","JSON","stringify","process","exit"],"mappings":";;;;;;;;;;;;;;;;AAAA,IAAMA,GAAG,GAAGC,OAAO,CAAC,aAAD,CAAnB;;AACA,IAAMC,KAAK,GAAGD,OAAO,CAAC,OAAD,CAArB;;AACA,IAAME,QAAQ,GAAGF,OAAO,CAAC,OAAD,CAAxB;;AACA,IAAMG,cAAc,GAAGH,OAAO,CAAC,2CAAD,CAA9B;;eACuBA,OAAO,CAAC,6BAAD,C;IAAtBI,U,YAAAA,U;;AACR,IAAMC,WAAW,GAAGL,OAAO,CAAC,+BAAD,CAA3B;;AAEAM,OAAO,CAACC,OAAR,GAAkB,iCAAlB;AAEAD,OAAO,CAACE,QAAR,GAAmB,iCAAnB;AAEAF,OAAO,CAACG,OAAR,GAAkBJ,WAAW,CAACK,IAA9B;;AAEAJ,OAAO,CAACK,OAAR;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAChBC,YAAAA,OADgB,QAChBA,OADgB,EAEXC,UAFW,QAEhBC,GAFgB,EAGhBC,cAHgB,QAGhBA,cAHgB,EAIhBC,OAJgB,QAIhBA,OAJgB;AAAA;AAAA,mBAMGZ,UAAU,CAACY,OAAD,CANb;;AAAA;AAMVC,YAAAA,IANU;AAOhBL,YAAAA,OAAO,GAAGT,cAAc,CAACS,OAAD,CAAxB;AACAC,YAAAA,UAAU,CAACK,kBAAX,GAAgCL,UAAU,CAAC,cAAD,CAA1C;AARgB;AAAA,mBASEd,GAAG,CAACkB,IAAD,EAAOJ,UAAP,CATL;;AAAA;AASVC,YAAAA,GATU;AAWVK,YAAAA,KAXU,GAWF,IAAIjB,QAAJ,CAAa,CACzB;AACEkB,cAAAA,KAAK,qBAAcnB,KAAK,CAACoB,IAAN,CAAWT,OAAX,CAAd,cAAqCG,cAArC,CADP;AAEEO,cAAAA,IAAI,EAAEjB,WAAW,CAACiB,IAAZ,CAAiB;AACrBR,gBAAAA,GAAG,EAAHA,GADqB;AAErBF,gBAAAA,OAAO,EAAPA,OAFqB;AAGrBG,gBAAAA,cAAc,EAAdA,cAHqB;AAIrBQ,gBAAAA,gBAAgB,EAAE;AAJG,eAAjB;AAFR,aADyB,CAAb,CAXE;AAAA,6CAuBTJ,KAAK,CAACK,GAAN,GAAYC,IAAZ,CAAiB,UAAAC,GAAG,EAAI;AAC7B,qBAAOA,GAAG,CAACC,IAAJ,CAASC,GAAhB;AACA,qBAAOF,GAAG,CAACC,IAAJ,CAASE,YAAhB;AAEAC,cAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAeP,GAAG,CAACC,IAAnB,EAAyB,IAAzB,EAA+B,CAA/B,CAAZ;AACAO,cAAAA,OAAO,CAACC,IAAR;AACD,aANM,CAvBS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAAA;AAAA;AAAA;AAAA","sourcesContent":["const APM = require('@aragon/apm')\nconst chalk = require('chalk')\nconst TaskList = require('listr')\nconst defaultAPMName = require('@aragon/cli-utils/src/helpers/default-apm')\nconst { ensureWeb3 } = require('../../helpers/web3-fallback')\nconst getRepoTask = require('../dao_cmds/utils/getRepoTask')\n\nexports.command = 'info <apmRepo> [apmRepoVersion]'\n\nexports.describe = 'Get information about a package'\n\nexports.builder = getRepoTask.args\n\nexports.handler = async function({\n  apmRepo,\n  apm: apmOptions,\n  apmRepoVersion,\n  network,\n}) {\n  const web3 = await ensureWeb3(network)\n  apmRepo = defaultAPMName(apmRepo)\n  apmOptions.ensRegistryAddress = apmOptions['ens-registry']\n  const apm = await APM(web3, apmOptions)\n\n  const tasks = new TaskList([\n    {\n      title: `Fetching ${chalk.bold(apmRepo)}@${apmRepoVersion}`,\n      task: getRepoTask.task({\n        apm,\n        apmRepo,\n        apmRepoVersion,\n        artifactRequired: false,\n      }),\n    },\n  ])\n\n  return tasks.run().then(ctx => {\n    delete ctx.repo.abi\n    delete ctx.repo.environments\n\n    console.log(JSON.stringify(ctx.repo, null, 2))\n    process.exit()\n  })\n}\n"],"file":"info.js"}