{"version":3,"sources":["../../src/helpers/truffle-deploy-artifacts.js"],"names":["flatten","require","getTruffleConfig","module","exports","contractArtifacts","contractName","sourcePath","compiledAt","updatedAt","compiler","solcConfig","solc","optimizer","enabled","flattenedCode"],"mappings":";;;;;;;;;;;;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,mBAAD,CAAvB;;eAC6BA,OAAO,CAAC,kBAAD,C;IAA5BC,gB,YAAAA,gB;;AAERC,MAAM,CAACC,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAiB,iBAAMC,iBAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAEbC,YAAAA,YAFa,GAMXD,iBANW,CAEbC,YAFa,EAGbC,UAHa,GAMXF,iBANW,CAGbE,UAHa,EAIFC,UAJE,GAMXH,iBANW,CAIbI,SAJa,EAKbC,QALa,GAMXL,iBANW,CAKbK,QALa;AAQTC,YAAAA,UARS,GAQIT,gBAAgB,GAAGU,IARvB;AASfF,YAAAA,QAAQ,CAACG,SAAT,GAAqBF,UAAU,GAAGA,UAAU,CAACE,SAAd,GAA0B;AAAEC,cAAAA,OAAO,EAAE;AAAX,aAAzD;AATe;AAAA,mBAUad,OAAO,CAAC,CAACO,UAAD,CAAD,CAVpB;;AAAA;AAUTQ,YAAAA,aAVS;AAAA,6CAYR;AACLT,cAAAA,YAAY,EAAZA,YADK;AAELE,cAAAA,UAAU,EAAVA,UAFK;AAGLE,cAAAA,QAAQ,EAARA,QAHK;AAILK,cAAAA,aAAa,EAAbA;AAJK,aAZQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjB;;AAAA;AAAA;AAAA;AAAA","sourcesContent":["const flatten = require('truffle-flattener')\nconst { getTruffleConfig } = require('./truffle-config')\n\nmodule.exports = async contractArtifacts => {\n  const {\n    contractName,\n    sourcePath,\n    updatedAt: compiledAt,\n    compiler,\n  } = contractArtifacts\n\n  const solcConfig = getTruffleConfig().solc\n  compiler.optimizer = solcConfig ? solcConfig.optimizer : { enabled: false }\n  const flattenedCode = await flatten([sourcePath])\n\n  return {\n    contractName,\n    compiledAt,\n    compiler,\n    flattenedCode,\n  }\n}\n"],"file":"truffle-deploy-artifacts.js"}