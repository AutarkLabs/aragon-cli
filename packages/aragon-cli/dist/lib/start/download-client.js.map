{"version":3,"sources":["../../../src/lib/start/download-client.js"],"names":["clone","require","pkg","downloadClient","ctx","task","clientRepo","aragon","clientVersion","CLIENT_PATH","os","homedir","clientPath","path","resolve","skip","clientAvailable","checkout"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;AACA,IAAMA,KAAK,GAAG,qBAAUC,OAAO,CAAC,WAAD,CAAjB,CAAd;;AACA,IAAMC,GAAG,GAAGD,OAAO,CAAC,uBAAD,CAAnB;;SAEsBE,c;;;;;;;0BAAf;AAAA;;AAAA;AAAA;AAAA;AAAA;AACLC,YAAAA,GADK,QACLA,GADK,EAELC,IAFK,QAELA,IAFK,yBAGLC,UAHK,EAGLA,UAHK,gCAGQJ,GAAG,CAACK,MAAJ,CAAWD,UAHnB,oBAILE,aAJK,QAILA,aAJK;AAMCC,YAAAA,WAND,aAMkBC,eAAGC,OAAH,EANlB,6BAMiDH,aANjD;AAOLJ,YAAAA,GAAG,CAACQ,UAAJ,GAAiBH,WAAjB,CAPK,CASL;;AATK,iBAUD,yBAAWI,iBAAKC,OAAL,CAAaL,WAAb,CAAX,CAVC;AAAA;AAAA;AAAA;;AAWHJ,YAAAA,IAAI,CAACU,IAAL,CAAU,2BAAV;AACAX,YAAAA,GAAG,CAACY,eAAJ,GAAsB,IAAtB;AAZG;;AAAA;AAgBL;AACA,wCAAcP,WAAd,EAjBK,CAmBL;;AAnBK,6CAoBET,KAAK,CAACM,UAAD,EAAaG,WAAb,EAA0B;AAAEQ,cAAAA,QAAQ,EAAET;AAAZ,aAA1B,CApBP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import path from 'path'\nimport { existsSync, ensureDirSync } from 'fs-extra'\nimport os from 'os'\nimport { promisify } from 'util'\nconst clone = promisify(require('git-clone'))\nconst pkg = require('../../../package.json')\n\nexport async function downloadClient({\n  ctx,\n  task,\n  clientRepo = pkg.aragon.clientRepo,\n  clientVersion,\n}) {\n  const CLIENT_PATH = `${os.homedir()}/.aragon/client-${clientVersion}`\n  ctx.clientPath = CLIENT_PATH\n\n  // Make sure we haven't already downloaded the Client\n  if (existsSync(path.resolve(CLIENT_PATH))) {\n    task.skip('Client already downloaded')\n    ctx.clientAvailable = true\n    return\n  }\n\n  // Ensure folder exists\n  ensureDirSync(CLIENT_PATH)\n\n  // Clone client\n  return clone(clientRepo, CLIENT_PATH, { checkout: clientVersion })\n}\n"],"file":"download-client.js"}