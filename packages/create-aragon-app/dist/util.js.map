{"version":3,"sources":["../src/util.js"],"names":["execa","require","PGK_MANAGER_BIN_NPM","getNodePackageManager","installDeps","cwd","task","bin","installTask","stdout","on","log","output","err","Error","message","stderr","isValidAragonId","aragonId","test","module","exports"],"mappings":";;;;AAAA,IAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEA,IAAMC,mBAAmB,GAAG,KAA5B;;AAEA,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;AAClC,SAAOD,mBAAP;AACD,CAFD;;AAIA,IAAME,WAAW,GAAG,SAAdA,WAAc,CAACC,GAAD,EAAMC,IAAN,EAAe;AACjC,MAAMC,GAAG,GAAGJ,qBAAqB,EAAjC;AACA,MAAMK,WAAW,GAAGR,KAAK,CAACO,GAAD,EAAM,CAAC,SAAD,CAAN,EAAmB;AAAEF,IAAAA,GAAG,EAAHA;AAAF,GAAnB,CAAzB;AACAG,EAAAA,WAAW,CAACC,MAAZ,CAAmBC,EAAnB,CAAsB,MAAtB,EAA8B,UAAAC,GAAG,EAAI;AACnC,QAAI,CAACA,GAAL,EAAU;AACVL,IAAAA,IAAI,CAACM,MAAL,GAAcD,GAAd;AACD,GAHD;AAKA,SAAOH,WAAW,SAAX,CAAkB,UAAAK,GAAG,EAAI;AAC9B,UAAM,IAAIC,KAAJ,WACDD,GAAG,CAACE,OADH,eACeF,GAAG,CAACG,MADnB,2DAAN;AAGD,GAJM,CAAP;AAKD,CAbD;AAeA;;;;;;;AAKA,SAASC,eAAT,CAAyBC,QAAzB,EAAmC;AACjC,SAAO,eAAeC,IAAf,CAAoBD,QAApB,CAAP;AACD;;AAEDE,MAAM,CAACC,OAAP,GAAiB;AACfjB,EAAAA,WAAW,EAAXA,WADe;AAEfa,EAAAA,eAAe,EAAfA,eAFe;AAGfd,EAAAA,qBAAqB,EAArBA;AAHe,CAAjB","sourcesContent":["const execa = require('execa')\n\nconst PGK_MANAGER_BIN_NPM = 'npm'\n\nconst getNodePackageManager = () => {\n  return PGK_MANAGER_BIN_NPM\n}\n\nconst installDeps = (cwd, task) => {\n  const bin = getNodePackageManager()\n  const installTask = execa(bin, ['install'], { cwd })\n  installTask.stdout.on('data', log => {\n    if (!log) return\n    task.output = log\n  })\n\n  return installTask.catch(err => {\n    throw new Error(\n      `${err.message}\\n${err.stderr}\\n\\nFailed to install dependencies. See above output.`\n    )\n  })\n}\n\n/**\n * Validates an Aragon Id\n * @param {string} aragonId Aragon Id\n * @returns {boolean} `true` if valid\n */\nfunction isValidAragonId(aragonId) {\n  return /^[a-z0-9-]+$/.test(aragonId)\n}\n\nmodule.exports = {\n  installDeps,\n  isValidAragonId,\n  getNodePackageManager,\n}\n"],"file":"util.js"}